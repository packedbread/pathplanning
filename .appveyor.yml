image:
  - Visual Studio 2019
version: "{build}"
clone_depth: 1
init:
  - git config --global core.longpaths true
  - git config --global core.autocrlf input
branches:
  only:
    - master
install:
  - cmd: SET PATH=C:\msys64;%PATH%
  - rename "C:\Program Files\Git\usr\bin\sh.exe" "sh-ignored.exe"
environment:
  matrix:
    - BUILD_TYPE: Release
      BOOST_ROOT: C:\Libraries\boost_1_71_0
      CC: C:\msys64\mingw64.exe
      CXX: C:\msys64\mingw64.exe
    - BUILD_TYPE: Debug
      BOOST_ROOT: C:\Libraries\boost_1_71_0
      CC: C:\msys64\mingw64.exe
      CXX: C:\msys64\mingw64.exe
build_script:
  - cmake -G "MinGW Makefiles" -S . -B %BUILD_TYPE%-Build -D CMAKE_BUILD_TYPE=%BUILD_TYPE%
  - cmake --build %BUILD_TYPE%-Build --target tests
  - cd %BUILD_TYPE%-Build\tests
  - start tests.exe --log_level=all
  - cd ..\..
  - cmake --build ${BUILD_DIR} --target path_planning
